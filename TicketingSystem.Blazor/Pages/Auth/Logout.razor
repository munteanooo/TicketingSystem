@page "/logout"
@using Microsoft.AspNetCore.Components.Authorization
@using TicketingSystem.Blazor.Services
@inject AuthService AuthService
@inject NavigationManager NavigationManager

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-16 text-center">
    <MudProgressCircular Color="Color.Primary" Indeterminate="true" Size="Size.Large" />
    <MudText Typo="Typo.h6" Class="mt-4">Se închide sesiunea...</MudText>
</MudContainer>

@code {
    protected override async Task OnInitializedAsync()
    {
        // 1. Apelăm metoda de Logout din serviciul tău de autentificare
        // Aceasta ar trebui să șteargă token-ul din LocalStorage
        await AuthService.Logout();

        // 2. Redirecționăm utilizatorul către pagina de Login sau Acasă
        NavigationManager.NavigateTo("/login");
    }
}