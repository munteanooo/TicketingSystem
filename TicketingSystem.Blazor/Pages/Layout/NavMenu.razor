@using Microsoft.AspNetCore.Components.Authorization

<MudNavMenu>
    @* Secțiune Publică *@
    <div class="pa-4 mb-2 mt-2">
        <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold;">TICKET PRO</MudText>
    </div>

    <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Acasă</MudNavLink>

    <AuthorizeView>
        <Authorized>
            @* Secțiune Client - Vizibilă pentru oricine e logat *@
            <MudText Typo="Typo.overline" Class="px-4 py-2 mt-4 mud-text-secondary">Suport Client</MudText>
            <MudNavLink Href="/tickets" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.ConfirmationNumber">Tichetele Mele</MudNavLink>
            <MudNavLink Href="/tickets/add" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AddCircle">Creează Tichet</MudNavLink>

            @* Secțiune Admin/Tehnician - Filtrare pe Roluri *@
            <AuthorizeView Roles="Admin, TechSupport" Context="adminContext">
                <MudDivider Class="my-2" />
                <MudText Typo="Typo.overline" Class="px-4 py-2 mt-2 mud-text-secondary">Administrare</MudText>

                <MudNavLink Href="/tech/dashboard" Icon="@Icons.Material.Filled.Dashboard">Dashboard</MudNavLink>

                <MudNavGroup Title="Gestionare Tichete" Icon="@Icons.Material.Filled.AdminPanelSettings" ExpandIcon="@Icons.Material.Filled.ExpandMore">
                    <MudNavLink Href="/admin/unassigned" Icon="@Icons.Material.Filled.AssignmentLate">Tichete Nealocate</MudNavLink>
                    <MudNavLink Href="/admin/all" Icon="@Icons.Material.Filled.FormatListBulleted">Istoric General</MudNavLink>
                </MudNavGroup>
            </AuthorizeView>
        </Authorized>

        <NotAuthorized>
            <MudDivider Class="my-2" />
            <MudText Typo="Typo.overline" Class="px-4 py-2 mt-2 mud-text-secondary">Acces Sistem</MudText>
            <MudNavLink Href="/login" Icon="@Icons.Material.Filled.Login">Login</MudNavLink>
            <MudNavLink Href="/register" Icon="@Icons.Material.Filled.PersonAdd">Înregistrare</MudNavLink>
        </NotAuthorized>
    </AuthorizeView>
</MudNavMenu>